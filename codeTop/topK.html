<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        let list = [9, 8, 7, 6, 5, 4, 3, 2, 1]
        const topK = (list, K) => {
            let pitition = (list, left, right) => {
                let first = list[left]
                let pointer1 = left + 1
                let pointer2 = right
                while (pointer1 < pointer2) {
                    while (list[pointer1] <= first) {
                        pointer1++
                    }
                    while (list[pointer2] >= first) {
                        pointer2--
                    }
                    wrap(list, pointer1, pointer2)
                }
                wrap(list, pointer2, left)
                return pointer2
            }
            console.log(list, K)
            let position = pitition(list, K, 0, list.length - 1)
            console.log(position)
            if (list.length - position + 1 === K) {
                return list[position]
            } else if (list.length - position + 1 > K) {
                return topK(list.slice(position + 1, list.length - 1), K)
            } else {
                return topK(list.slice(0, position - 1), K - (list.length - position + 1))
            }
        }
        const wrap = (list, i, j) => {
            [list[i], list[j]] = [list[j], list[i]]
        }
        console.log(topK(list, 5))
    </script>
</body>

</html>